(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{126:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"配置模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置模板","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置模板")]),t._v(" "),s("blockquote",[s("p",[t._v("配置文件分为框架配置文件和数据源配置文件")])]),t._v(" "),s("h2",{attrs:{id:"框架配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#框架配置文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 框架配置文件")]),t._v(" "),s("p",[t._v("下列配置为框架配置基础，贯穿整个框架的相关封装。")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ※※※※※※※※※框架配置※※※※※※※※※")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("qmframework")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("  # ※※※※※※※※※通讯配置※※※※※※※※※")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("  transmit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 请求数据时，最外层的key名(rest风格)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    request-key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'value'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 返回数据时，最外层的key名(rest风格)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    response-key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'value'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 返回数据时，默认message的语言 EN/CN")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    response-message-lang")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("CN")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("  # ※※※※※※※※※AES加密配置※※※※※※※※※")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("  aes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 是否启用AES对称加密传输")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # AES秘钥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'ohiah2019sDShdieub51h8910s'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 加密次数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 统一使用的编码方式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    encoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'UTF-8'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("  # ※※※※※※※※※版本控制配置※※※※※※※※※")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("  version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 是否开启版本控制(ture时,每个请求需在header带上version参数)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 系统目前版本编号")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # now: '1.0.0'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 系统容忍请求版本编号(默认允许当前版本)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # allows:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    #  - '0.9.9'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    #  - '0.9.8'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("  # ※※※※※※※※※特殊配置※※※※※※※※※")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("  special")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 特殊请求不进行解析(包括版本控制和解析json等)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 该配置主要排除第三方API调用接口时特殊请求而框架自动解析json的问题")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("    # 适用于动态配置，例：/druid/**")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    uri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'/druid/**'")]),t._v("\n")])])]),s("h2",{attrs:{id:"数据源配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据源配置文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据源配置文件")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("  datasource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("    druid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      driver-class-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'com.mysql.cj.jdbc.Driver'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'jdbc:mysql://db.aisrt.vip:3306/face_api'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'root'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'srt888'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 连接池的配置信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 初始化大小，最小，最大")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      initial-size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      min-idle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      maxActive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("20")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 配置获取连接等待超时的时间")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      maxWait")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("60000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      timeBetweenEvictionRunsMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("60000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 配置一个连接在池中最小生存的时间，单位是毫秒")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      minEvictableIdleTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("300000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      validationQuery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("SELECT 1 FROM DUAL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      testWhileIdle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      testOnBorrow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      testOnReturn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 打开PSCache，并且指定每个连接上PSCache的大小")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      poolPreparedStatements")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      maxPoolPreparedStatementPerConnectionSize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("20")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 配置监控统计拦截的filters，去掉后监控界面sql无法统计，'wall'用于防火墙")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      filters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("stat,wall,slf4j")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 通过connectProperties属性来打开mergeSql功能；慢SQL记录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      connectionProperties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("'stat.mergeSql=true;druid.stat.slowSqlMillis=5000'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 配置DruidStatFilter")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      web-stat-filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        url-pattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v('"/*"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        exclusions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v('"*.js,*.gif,*.jpg,*.bmp,*.png,*.css,*.ico,/druid/*"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("      # 配置DruidStatViewServlet")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("      stat-view-servlet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        url-pattern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v('"/druid/*"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # IP白名单(没有配置或者为空，则允许所有访问)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        allow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # IP黑名单 (存在共同时，deny优先于allow)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        deny")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # 禁用HTML页面上的“Reset All”功能")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        reset-enable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # 登录名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        login-username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("admin")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("        # 登录密码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("        login-password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("123456")]),t._v("\n")])])])])},[],!1,null,null,null);a.default=e.exports}}]);